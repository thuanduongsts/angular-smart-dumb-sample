@for (option of options(); track option.id; let i = $index) {
  @let isDisabled = !!option?.isDisable;
  <div
    #optionEl
    role="option"
    class="option"
    [tabindex]="isDisabled ? -1 : 0"
    [ngClass]="{
      'padding-multiple-options': isMultiple(),
      selected: focusIndex() === i,
      disabled: isDisabled
    }"
    (click)="onSelectChange($event, option, i)"
  >
    @if (!customOptionTemplate()) {
      <ng-container *ngTemplateOutlet="defaultOptionTemplate; context: { $implicit: option }" />
    } @else {
      <ng-container
        *ngTemplateOutlet="
          customOptionTemplate()!.templateRef;
          context: { option: option, isChecked: option | isSelected: selectedOptions() }
        "
      />
    }
  </div>
}

@if (options().length === 0) {
  <div class="empty-option">No available options</div>
}

<ng-template #defaultOptionTemplate let-option>
  @if (isMultiple()) {
    <app-checkbox
      [ngModel]="option | isSelected: selectedOptions()"
      [label]="option.name"
      [disabled]="!!option?.isDisable"
    />
  } @else {
    <span> {{ option.name }}</span>
  }
</ng-template>
